syntax = "proto3";

option csharp_namespace = "ECommerceGRPC.ProductService";

package productservice;

// Servicio de gestión de productos con comunicación gRPC
service ProductService {
  // Obtiene un producto específico por ID (Unary)
  rpc GetProduct (GetProductRequest) returns (ProductResponse);
  
  // Lista productos con paginación y filtros (Server Streaming)
  rpc GetProducts (GetProductsRequest) returns (stream ProductResponse);
  
  // Crea un nuevo producto (Unary)
  rpc CreateProduct (CreateProductRequest) returns (ProductResponse);
  
  // Actualiza un producto existente (Unary)
  rpc UpdateProduct (UpdateProductRequest) returns (ProductResponse);
  
  // Elimina un producto de forma lógica (Unary)
  rpc DeleteProduct (DeleteProductRequest) returns (DeleteProductResponse);
  
  // Busca productos por término (Server Streaming)
  rpc SearchProducts (SearchProductsRequest) returns (stream ProductResponse);

  // Hola
  //rpc SayHello (HelloRequest) returns (HelloReply);
}

// Mensaje que representa un producto completo
message ProductResponse {
  int32 id = 1;
  string name = 2;
  string description = 3;
  double price = 4;
  int32 stock = 5;
  string category = 6;
  string created_at = 7;
  string updated_at = 8;
  bool is_active = 9;
}

// Solicitud para obtener un producto por ID
message GetProductRequest {
  int32 id = 1;
}

// Solicitud para listar productos con filtros opcionales
message GetProductsRequest {
  int32 page_number = 1;      // Número de página (default: 1)
  int32 page_size = 2;         // Tamaño de página (default: 10)
  string category = 3;         // Filtro opcional por categoría
  double min_price = 4;        // Filtro opcional precio mínimo
  double max_price = 5;        // Filtro opcional precio máximo
  bool active_only = 6;        // Solo productos activos (default: true)
}

// Solicitud para crear un nuevo producto
message CreateProductRequest {
  string name = 1;
  string description = 2;
  double price = 3;
  int32 stock = 4;
  string category = 5;
}

// Solicitud para actualizar un producto existente
message UpdateProductRequest {
  int32 id = 1;
  string name = 2;
  string description = 3;
  double price = 4;
  int32 stock = 5;
  string category = 6;
  bool is_active = 7;
}

// Solicitud para eliminar un producto
message DeleteProductRequest {
  int32 id = 1;
}

// Respuesta de eliminación de producto
message DeleteProductResponse {
  bool success = 1;
  string message = 2;
}

// Solicitud para buscar productos por término
message SearchProductsRequest {
  string search_term = 1;      // Término de búsqueda
  int32 page_number = 2;       // Número de página (default: 1)
  int32 page_size = 3;         // Tamaño de página (default: 10)
}

/////////////////Basico para probar gRPC/////////////////////
// Respuesta Nombre de usuario
//message HelloRequest {
  //string name = 1;
//}

// Respuesta del saludo
//message HelloReply {
  //string message = 1;
//}